apiVersion: security.istio.io/v1beta1
kind: RequestAuthentication
metadata:
  name: jwt-request-auth
  namespace: local
spec:
  selector:
    matchLabels:
      app: api # app name
  jwtRules:
    - issuer: "http://localhost:8180/realms/quickstart" # auth server issuer from decode jwt "iss"
      jwks: >- # get this value from >>> curl http://localhost:8180/realms/quickstart/protocol/openid-connect/certs
        {"keys":[{"kid":"EJRhANU1aWQjHPyoGC_bhS8A_Ne0kMVcMhs5Iyy7tdY","kty":"RSA","alg":"RS256","use":"sig","n":"qFz4CJJJxQocHhJ_iSwN-aPR0uuE4LW5DwpAAf0BQvO8Kobn3_vBSvpZhsOAcR2AD4IjMTK0PnRaO2u55p8mXBPcFfuN7TSpJilTh3qc4e49J_p_oZ_A7BanEjwz0sef5jDcttLxm_6ygC_aF6CBxYNpcTuK44GzMdgSYjxoA5NVAE1SmZuu-bViY-WKVjZ-2n56ZeGT6rdJvajaCfyP3WuUqRsdRSS6SIvDPANHvfE3CTQ2iouuXZTnX1pi-pkYBrZGNx9QziRuLeppvntbKQ_1l2Q1Wx8zSKqdaL9I3QuwJvJy1WEbJko7sBF_0ezDw3WCQYyzyAYm2JOXRR37ww","e":"AQAB","x5c":["MIICozCCAYsCBgGQksqP4DANBgkqhkiG9w0BAQsFADAVMRMwEQYDVQQDDApxdWlja3N0YXJ0MB4XDTI0MDcwODE0MzkyN1oXDTM0MDcwODE0NDEwN1owFTETMBEGA1UEAwwKcXVpY2tzdGFydDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKhc+AiSScUKHB4Sf4ksDfmj0dLrhOC1uQ8KQAH9AULzvCqG59/7wUr6WYbDgHEdgA+CIzEytD50WjtrueafJlwT3BX7je00qSYpU4d6nOHuPSf6f6GfwOwWpxI8M9LHn+Yw3LbS8Zv+soAv2heggcWDaXE7iuOBszHYEmI8aAOTVQBNUpmbrvm1YmPlilY2ftp+emXhk+q3Sb2o2gn8j91rlKkbHUUkukiLwzwDR73xNwk0NoqLrl2U519aYvqZGAa2RjcfUM4kbi3qab57WykP9ZdkNVsfM0iqnWi/SN0LsCbyctVhGyZKO7ARf9Hsw8N1gkGMs8gGJtiTl0Ud+8MCAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAhLwPymEJ697SeBkCmOyK7zGygbiy8Mdq7yp66LmBWUxNSZzo/pDgcdL0b+8TKy7PCis4Xppv7kNyT6Dt5DQnpLj9WuZzrymlHPCjaz9bWc5DTmD8hLXoQgYiwkMr5OVMnzu5FL2U2jsHtnLu3lK39Obk/kQz1M1S5JsUftpYCi25E64CwI2gM7tdTW16SDS4Vl7GJJcN3xgpOXIFzQHx4n4D/6qIFOvhUK0iUCqfrodtGc3waAFHxPFjBmkS4g0aZLuDxCSn3obU1xxbKUSAeK4xY29gUOWqauyZSZ4PLSN5pWdlLA2IbXqCGqUrZRtlBxlgzOl4emy8hQ8glD1PUQ=="],"x5t":"WvMy3ihbZ-hN4ZSiunubkwzVBUo","x5t#S256":"VY7wSh5T-OZZHedQQCm2uimvAeXqxXaxBfY7V90G9Dw"},{"kid":"9gIoPoJgek-lRMcj9RUn1yyZXv8DZNPGii170muHy9o","kty":"RSA","alg":"RSA-OAEP","use":"enc","n":"tJrOnxfT5JHwQv0lVq0ooWj5-PdaxPDZmOKm0lFSz_NMgQUOAe-FECsXEgK6QAnLcwgfH3UJ5d58Vu_E0Pwid5xJgeT0Wkb1SHHgc9vB-aZefLnWDSGa-fB6-_a8FY-pUSjRIJUrK19N_P-eP1sdAuJBecUZXimkGCYaZW3HBpsk9VGQLu8P1bERZV0vpxXR6OOXTacpDM25c_gNZ7izKU3eaBRkzs4w2FMFLcXJwpE0Qmv3AuPqM9aHwy-2nfiDVcDbz9C8Iv15jd_ez35hknV_52OXIIKmnSDXNmKL0dO1aovJaACbm7dH62tr8jXqthSIpsKIE-LUSFCLHxIHkw","e":"AQAB","x5c":["MIICozCCAYsCBgGQksqQLjANBgkqhkiG9w0BAQsFADAVMRMwEQYDVQQDDApxdWlja3N0YXJ0MB4XDTI0MDcwODE0MzkyN1oXDTM0MDcwODE0NDEwN1owFTETMBEGA1UEAwwKcXVpY2tzdGFydDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALSazp8X0+SR8EL9JVatKKFo+fj3WsTw2ZjiptJRUs/zTIEFDgHvhRArFxICukAJy3MIHx91CeXefFbvxND8InecSYHk9FpG9Uhx4HPbwfmmXny51g0hmvnwevv2vBWPqVEo0SCVKytfTfz/nj9bHQLiQXnFGV4ppBgmGmVtxwabJPVRkC7vD9WxEWVdL6cV0ejjl02nKQzNuXP4DWe4sylN3mgUZM7OMNhTBS3FycKRNEJr9wLj6jPWh8Mvtp34g1XA28/QvCL9eY3f3s9+YZJ1f+djlyCCpp0g1zZii9HTtWqLyWgAm5u3R+tra/I16rYUiKbCiBPi1EhQix8SB5MCAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAEWz8QNDKEvUMpKcmFNp55G5qXUTKosYXmKqM7TMWK2V4NjYH/+JtHHtOl5dN7OFKW0uxGbHIS3rAKOmv1RCl5viM6Rm1i5cqXBeRKUHVB6Nb55hxbqLJGAhvUAO7onWOFNpdQKpxL9GFL65Zia8jbEACSc1spl6UkVCKHOaylK/b+gVurSbB65prpv4PjqT7Q0bsezl+FmluqnW2g5aYo7JcN4dqABVb01e4Z6O1LI3sYktvwoa71KExrld7R2pNi/Mmy5InbuANrJACmawxh4Z7gRgqFAWq9jZ+cwwQibx+Hc/Dnq6FUgOWbBlnM7ybTGmhVpzAfo+UN23HdN7rPA=="],"x5t":"SLG-PnCol8lR_B0o93gwXt0z178","x5t#S256":"zXLgSakmQbiaq3Y0dZA4Mm1G6CvyQbWZVBPCt1wCePg"}]}
